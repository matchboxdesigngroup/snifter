!function($){function buttonClick(e){var editor=this,buttonDiv=e.target,buttonName=$.data(buttonDiv,BUTTON_NAME),button=buttons[buttonName],popupName=button.popupName,popup=popups[popupName];if(!editor.disabled&&$(buttonDiv).attr(DISABLED)!=DISABLED){var data={editor:editor,button:buttonDiv,buttonName:buttonName,popup:popup,popupName:popupName,command:button.command,useCSS:editor.options.useCSS};if(button.buttonClick&&button.buttonClick(e,data)===!1)return!1;if("source"==buttonName)sourceMode(editor)?(delete editor.range,editor.$area.hide(),editor.$frame.show(),buttonDiv.title=button.title):(editor.$frame.hide(),editor.$area.show(),buttonDiv.title="Show Rich Text"),setTimeout(function(){refreshButtons(editor)},100);else if(!sourceMode(editor)){if(popupName){var $popup=$(popup);if("url"==popupName){if("link"==buttonName&&""===selectedText(editor))return showMessage(editor,"A selection is required when inserting a link.",buttonDiv),!1;$popup.children(":button").unbind(CLICK).bind(CLICK,function(){var $text=$popup.find(":text"),url=$.trim($text.val());""!==url&&execCommand(editor,data.command,url,null,data.button),$text.val("http://"),hidePopups(),focus(editor)})}else"pastetext"==popupName&&$popup.children(":button").unbind(CLICK).bind(CLICK,function(){var $textarea=$popup.find("textarea"),text=$textarea.val().replace(/\n/g,"<br />");""!==text&&execCommand(editor,data.command,text,null,data.button),$textarea.val(""),hidePopups(),focus(editor)});if(buttonDiv!==$.data(popup,BUTTON))return showPopup(editor,popup,buttonDiv),!1;return}if("print"==buttonName)editor.$frame[0].contentWindow.print();else if(!execCommand(editor,data.command,data.value,data.useCSS,buttonDiv))return!1}focus(editor)}}function hoverEnter(e){var $div=$(e.target).closest("div");$div.css(BACKGROUND_COLOR,$div.data(BUTTON_NAME)?"#FFF":"#FFC")}function hoverLeave(e){$(e.target).closest("div").css(BACKGROUND_COLOR,"transparent")}function popupClick(e){var editor=this,popup=e.data.popup,target=e.target;if(popup!==popups.msg&&!$(popup).hasClass(PROMPT_CLASS)){var value,buttonDiv=$.data(popup,BUTTON),buttonName=$.data(buttonDiv,BUTTON_NAME),button=buttons[buttonName],command=button.command,useCSS=editor.options.useCSS;"font"==buttonName?value=target.style.fontFamily.replace(/"/g,""):"size"==buttonName?("DIV"==target.tagName.toUpperCase()&&(target=target.children[0]),value=target.innerHTML):"style"==buttonName?value="<"+target.tagName+">":"color"==buttonName?value=hex(target.style.backgroundColor):"highlight"==buttonName&&(value=hex(target.style.backgroundColor),ie?command="backcolor":useCSS=!0);var data={editor:editor,button:buttonDiv,buttonName:buttonName,popup:popup,popupName:button.popupName,command:command,value:value,useCSS:useCSS};if(!button.popupClick||button.popupClick(e,data)!==!1){if(data.command&&!execCommand(editor,data.command,data.value,data.useCSS,buttonDiv))return!1;hidePopups(),focus(editor)}}}function checksum(text){for(var a=1,b=0,index=0;index<text.length;++index)a=(a+text.charCodeAt(index))%65521,b=(b+a)%65521;return b<<16|a}function clear(editor){editor.$area.val(""),updateFrame(editor)}function createPopup(popupName,options,popupTypeClass,popupContent,popupHover){if(popups[popupName])return popups[popupName];var $popup=$(DIV_TAG).hide().addClass(POPUP_CLASS).appendTo("body");if(popupContent)$popup.html(popupContent);else if("color"==popupName){var colors=options.colors.split(" ");colors.length<10&&$popup.width("auto"),$.each(colors,function(idx,color){$(DIV_TAG).appendTo($popup).css(BACKGROUND_COLOR,"#"+color)}),popupTypeClass=COLOR_CLASS}else"font"==popupName?$.each(options.fonts.split(","),function(idx,font){$(DIV_TAG).appendTo($popup).css("fontFamily",font).html(font)}):"size"==popupName?$.each(options.sizes.split(","),function(idx,size){$(DIV_TAG).appendTo($popup).html('<font size="'+size+'">'+size+"</font>")}):"style"==popupName?$.each(options.styles,function(idx,style){$(DIV_TAG).appendTo($popup).html(style[1]+style[0]+style[1].replace("<","</"))}):"url"==popupName?($popup.html('Enter URL:<br /><input type="text" value="http://" size="35" /><br /><input type="button" value="Submit" />'),popupTypeClass=PROMPT_CLASS):"pastetext"==popupName&&($popup.html('Paste your content here and click submit.<br /><textarea cols="40" rows="3"></textarea><br /><input type="button" value="Submit" />'),popupTypeClass=PROMPT_CLASS);return popupTypeClass||popupContent||(popupTypeClass=LIST_CLASS),$popup.addClass(popupTypeClass),ie&&$popup.attr(UNSELECTABLE,"on").find("div,font,p,h1,h2,h3,h4,h5,h6").attr(UNSELECTABLE,"on"),($popup.hasClass(LIST_CLASS)||popupHover===!0)&&$popup.children().hover(hoverEnter,hoverLeave),popups[popupName]=$popup[0],$popup[0]}function disable(editor,disabled){disabled?(editor.$area.attr(DISABLED,DISABLED),editor.disabled=!0):(editor.$area.removeAttr(DISABLED),delete editor.disabled);try{ie?editor.doc.body.contentEditable=!disabled:editor.doc.designMode=disabled?"off":"on"}catch(err){}refreshButtons(editor)}function execCommand(editor,command,value,useCSS,button){restoreRange(editor),ie||((void 0===useCSS||null===useCSS)&&(useCSS=editor.options.useCSS),editor.doc.execCommand("styleWithCSS",0,useCSS.toString()));var message,success=!0;if(ie&&"inserthtml"==command.toLowerCase())getRange(editor).pasteHTML(value);else{try{success=editor.doc.execCommand(command,0,value||null)}catch(err){message=err.message,success=!1}success||("cutcopypaste".indexOf(command)>-1?showMessage(editor,"For security reasons, your browser does not support the "+command+" command. Try using the keyboard shortcut or context menu instead.",button):showMessage(editor,message?message:"Error executing the "+command+" command.",button))}return refreshButtons(editor),updateTextArea(editor,!0),success}function focus(editor){setTimeout(function(){sourceMode(editor)?editor.$area.focus():editor.$frame[0].contentWindow.focus(),refreshButtons(editor)},0)}function getRange(editor){return ie?getSelection(editor).createRange():getSelection(editor).getRangeAt(0)}function getSelection(editor){return ie?editor.doc.selection:editor.$frame[0].contentWindow.getSelection()}function hex(s){var m=/rgba?\((\d+), (\d+), (\d+)/.exec(s);if(m){for(s=(m[1]<<16|m[2]<<8|m[3]).toString(16);s.length<6;)s="0"+s;return"#"+s}var c=s.split("");return 4==s.length?"#"+c[1]+c[1]+c[2]+c[2]+c[3]+c[3]:s}function hidePopups(){$.each(popups,function(idx,popup){$(popup).hide().unbind(CLICK).removeData(BUTTON)})}function imagesPath(){var href=$("link[href*=cleditor]").attr("href");return href.replace(/^(.*\/)[^\/]+$/,"$1")+"/images/"}function imageUrl(filename){return"url("+imagesPath()+filename+")"}function refresh(editor){var $main=editor.$main,options=editor.options;editor.$frame&&editor.$frame.remove();var $frame=editor.$frame=$('<iframe frameborder="0" src="javascript:true;" />').hide().appendTo($main),contentWindow=$frame[0].contentWindow,doc=editor.doc=contentWindow.document,$doc=$(doc);doc.open(),doc.write(options.docType+"<html>"+(""===options.docCSSFile?"":'<head><link rel="stylesheet" type="text/css" href="'+options.docCSSFile+'" /></head>')+'<body style="'+options.bodyStyle+'"></body></html>'),doc.close(),ie&&$doc.click(function(){focus(editor)}),updateFrame(editor),ie&&($doc.bind("beforedeactivate beforeactivate selectionchange keypress",function(e){if("beforedeactivate"==e.type)editor.inactive=!0;else if("beforeactivate"==e.type)!editor.inactive&&editor.range&&editor.range.length>1&&editor.range.shift(),delete editor.inactive;else if(!editor.inactive)for(editor.range||(editor.range=[]),editor.range.unshift(getRange(editor));editor.range.length>2;)editor.range.pop()}),$frame.focus(function(){restoreRange(editor)})),$doc.click(hidePopups).bind("keyup mouseup",function(){refreshButtons(editor),updateTextArea(editor,!0)}),iOS?editor.$area.show():$frame.show(),$(function(){var $toolbar=editor.$toolbar,$group=$toolbar.children("div:last"),wid=$main.width(),hgt=$group.offset().top+$group.outerHeight()-$toolbar.offset().top+1;$toolbar.height(hgt),hgt=(/%/.test(""+options.height)?$main.height():parseInt(options.height))-hgt,$frame.width(wid).height(hgt),editor.$area.width(wid).height(ie6?hgt-2:hgt),disable(editor,editor.disabled),refreshButtons(editor)})}function refreshButtons(editor){iOS||!webkit||editor.focused||(editor.$frame[0].contentWindow.focus(),window.focus(),editor.focused=!0);var queryObj=editor.doc;ie&&(queryObj=getRange(editor));var inSourceMode=sourceMode(editor);$.each(editor.$toolbar.find("."+BUTTON_CLASS),function(idx,elem){var $elem=$(elem),button=$.cleditor.buttons[$.data(elem,BUTTON_NAME)],command=button.command,enabled=!0;if(editor.disabled)enabled=!1;else if(button.getEnabled){var data={editor:editor,button:elem,buttonName:button.name,popup:popups[button.popupName],popupName:button.popupName,command:button.command,useCSS:editor.options.useCSS};enabled=button.getEnabled(data),void 0===enabled&&(enabled=!0)}else if((inSourceMode||iOS)&&"source"!=button.name||ie&&("undo"==command||"redo"==command))enabled=!1;else if(command&&"print"!=command&&(ie&&"hilitecolor"==command&&(command="backcolor"),!ie||"inserthtml"!=command))try{enabled=queryObj.queryCommandEnabled(command)}catch(err){enabled=!1}enabled?($elem.removeClass(DISABLED_CLASS),$elem.removeAttr(DISABLED)):($elem.addClass(DISABLED_CLASS),$elem.attr(DISABLED,DISABLED))})}function restoreRange(editor){ie&&editor.range&&editor.range[0].select()}function select(editor){setTimeout(function(){sourceMode(editor)?editor.$area.select():execCommand(editor,"selectall")},0)}function selectedHTML(editor){restoreRange(editor);var range=getRange(editor);if(ie)return range.htmlText;var layer=$("<layer>")[0];layer.appendChild(range.cloneContents());var html=layer.innerHTML;return layer=null,html}function selectedText(editor){return restoreRange(editor),ie?getRange(editor).text:getSelection(editor).toString()}function showMessage(editor,message,button){var popup=createPopup("msg",editor.options,MSG_CLASS);popup.innerHTML=message,showPopup(editor,popup,button)}function showPopup(editor,popup,button){var offset,left,top,$popup=$(popup);if(button){var $button=$(button);offset=$button.offset(),left=--offset.left,top=offset.top+$button.height()}else{var $toolbar=editor.$toolbar;offset=$toolbar.offset(),left=Math.floor(($toolbar.width()-$popup.width())/2)+offset.left,top=offset.top+$toolbar.height()-2}hidePopups(),$popup.css({left:left,top:top}).show(),button&&($.data(popup,BUTTON,button),$popup.bind(CLICK,{popup:popup},$.proxy(popupClick,editor))),setTimeout(function(){$popup.find(":text,textarea").eq(0).focus().select()},100)}function sourceMode(editor){return editor.$area.is(":visible")}function updateFrame(editor,checkForChange){var code=editor.$area.val(),options=editor.options,updateFrameCallback=options.updateFrame,$body=$(editor.doc.body);if(updateFrameCallback){var sum=checksum(code);if(checkForChange&&editor.areaChecksum==sum)return;editor.areaChecksum=sum}var html=updateFrameCallback?updateFrameCallback(code):code;html=html.replace(/<(?=\/?script)/gi,"&lt;"),options.updateTextArea&&(editor.frameChecksum=checksum(html)),html!=$body.html()&&($body.html(html),$(editor).triggerHandler(CHANGE))}function updateTextArea(editor,checkForChange){var html=$(editor.doc.body).html(),options=editor.options,updateTextAreaCallback=options.updateTextArea,$area=editor.$area;if(updateTextAreaCallback){var sum=checksum(html);if(checkForChange&&editor.frameChecksum==sum)return;editor.frameChecksum=sum}var code=updateTextAreaCallback?updateTextAreaCallback(html):html;options.updateFrame&&(editor.areaChecksum=checksum(code)),code!=$area.val()&&($area.val(code),$(editor).triggerHandler(CHANGE))}$.cleditor={defaultOptions:{width:"auto",height:250,controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source",colors:"FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana",sizes:"1,2,3,4,5,6,7",styles:[["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],useCSS:!0,docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',docCSSFile:"",bodyStyle:"margin:4px; font:10pt Arial,Verdana; cursor:text"},buttons:{init:"bold,,|italic,,|underline,,|strikethrough,,|subscript,,|superscript,,|font,,fontname,|size,Font Size,fontsize,|style,,formatblock,|color,Font Color,forecolor,|highlight,Text Highlight Color,hilitecolor,color|removeformat,Remove Formatting,|bullets,,insertunorderedlist|numbering,,insertorderedlist|outdent,,|indent,,|alignleft,Align Text Left,justifyleft|center,,justifycenter|alignright,Align Text Right,justifyright|justify,,justifyfull|undo,,|redo,,|rule,Insert Horizontal Rule,inserthorizontalrule|image,Insert Image,insertimage,url|link,Insert Hyperlink,createlink,url|unlink,Remove Hyperlink,|cut,,|copy,,|paste,,|pastetext,Paste as Text,inserthtml,|print,,|source,Show Source"},imagesPath:function(){return imagesPath()}},$.fn.cleditor=function(options){var $result=$([]);return this.each(function(idx,elem){if("TEXTAREA"==elem.tagName.toUpperCase()){var data=$.data(elem,CLEDITOR);data||(data=new cleditor(elem,options)),$result=$result.add(data)}}),$result};var documentClickAssigned,BACKGROUND_COLOR="backgroundColor",BUTTON="button",BUTTON_NAME="buttonName",CHANGE="change",CLEDITOR="cleditor",CLICK="click",DISABLED="disabled",DIV_TAG="<div>",UNSELECTABLE="unselectable",MAIN_CLASS="cleditorMain",TOOLBAR_CLASS="cleditorToolbar",GROUP_CLASS="cleditorGroup",BUTTON_CLASS="cleditorButton",DISABLED_CLASS="cleditorDisabled",DIVIDER_CLASS="cleditorDivider",POPUP_CLASS="cleditorPopup",LIST_CLASS="cleditorList",COLOR_CLASS="cleditorColor",PROMPT_CLASS="cleditorPrompt",MSG_CLASS="cleditorMsg",ua=navigator.userAgent.toLowerCase(),ie=/msie/.test(ua),ie6=/msie\s6/.test(ua),webkit=/webkit/.test(ua),iOS=/iphone|ipad|ipod/i.test(ua),popups={},buttons=$.cleditor.buttons;$.each(buttons.init.split("|"),function(idx,button){var items=button.split(","),name=items[0];buttons[name]={stripIndex:idx,name:name,title:""===items[1]?name.charAt(0).toUpperCase()+name.substr(1):items[1],command:""===items[2]?name:items[2],popupName:""===items[3]?name:items[3]}}),delete buttons.init,cleditor=function(area,options){var editor=this;editor.options=options=$.extend({},$.cleditor.defaultOptions,options);var $area=editor.$area=$(area).hide().data(CLEDITOR,editor).blur(function(){updateFrame(editor,!0)}),$main=editor.$main=$(DIV_TAG).addClass(MAIN_CLASS).width(options.width).height(options.height),$toolbar=editor.$toolbar=$(DIV_TAG).addClass(TOOLBAR_CLASS).appendTo($main),$group=$(DIV_TAG).addClass(GROUP_CLASS).appendTo($toolbar),groupWidth=0;$.each(options.controls.split(" "),function(idx,buttonName){if(""===buttonName)return!0;if("|"==buttonName){{$(DIV_TAG).addClass(DIVIDER_CLASS).appendTo($group)}$group.width(groupWidth+1),groupWidth=0,$group=$(DIV_TAG).addClass(GROUP_CLASS).appendTo($toolbar)}else{var button=buttons[buttonName],$buttonDiv=$(DIV_TAG).data(BUTTON_NAME,button.name).addClass(BUTTON_CLASS).attr("title",button.title).bind(CLICK,$.proxy(buttonClick,editor)).appendTo($group).hover(hoverEnter,hoverLeave);groupWidth+=24,$group.width(groupWidth+1);var map={};button.css?map=button.css:button.image&&(map.backgroundImage=imageUrl(button.image)),button.stripIndex&&(map.backgroundPosition=-24*button.stripIndex),$buttonDiv.css(map),ie&&$buttonDiv.attr(UNSELECTABLE,"on"),button.popupName&&createPopup(button.popupName,options,button.popupClass,button.popupContent,button.popupHover)}}),$main.insertBefore($area).append($area),documentClickAssigned||($(document).click(function(e){var $target=$(e.target);$target.add($target.parents()).is("."+PROMPT_CLASS)||hidePopups()}),documentClickAssigned=!0),/auto|%/.test(""+options.width+options.height)&&$(window).bind("resize.cleditor",function(){refresh(editor)}),refresh(editor)};var fn=cleditor.prototype,methods=[["clear",clear],["disable",disable],["execCommand",execCommand],["focus",focus],["hidePopups",hidePopups],["sourceMode",sourceMode,!0],["refresh",refresh],["select",select],["selectedHTML",selectedHTML,!0],["selectedText",selectedText,!0],["showMessage",showMessage],["updateFrame",updateFrame],["updateTextArea",updateTextArea]];$.each(methods,function(idx,method){fn[method[0]]=function(){for(var editor=this,args=[editor],x=0;x<arguments.length;x++)args.push(arguments[x]);var result=method[1].apply(editor,args);return method[2]?result:editor}}),fn.change=function(handler){var $this=$(this);return handler?$this.bind(CHANGE,handler):$this.trigger(CHANGE)}}(jQuery),function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return"OPTGROUP"===child.nodeName.toUpperCase()?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:this.escapeExpression(group.label),children:0,disabled:group.disabled}),_ref=group.childNodes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){return"OPTION"===option.nodeName.toUpperCase()?(""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===!0?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;return null==text||text===!1?"":/[\&\<\>\"\'\`]/.test(text)?(map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g,text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;"})):text},SelectParser}(),SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;for(parser=new SelectParser,_ref=select.childNodes,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=null!=options?options:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},AbstractChosen.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(){var _this=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return _this.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;for(content="",_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)data=_ref[_i],content+=data.group?this.result_add_group(data):this.result_add_option(data),(null!=options?options.first:void 0)&&(data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&this.single_set_selected_text(data.text));return content},AbstractChosen.prototype.result_add_option=function(option){var classes,style;return option.search_match&&this.include_option_in_results(option)?(classes=[],option.disabled||option.selected&&this.is_multiple||classes.push("active-result"),!option.disabled||option.selected&&this.is_multiple||classes.push("disabled-result"),option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),style=""!==option.style.cssText?' style="'+option.style+'"':"",'<li class="'+classes.join(" ")+'"'+style+' data-option-array-index="'+option.array_index+'">'+option.search_text+"</li>"):""},AbstractChosen.prototype.result_add_group=function(group){return(group.search_match||group.group_match)&&group.active_options>0?'<li class="group-result">'+group.search_text+"</li>":""},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,regexAnchor,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;for(this.no_results_clear(),results=0,searchText=this.get_search_text(),escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),regexAnchor=this.search_contains?"":"^",regex=new RegExp(regexAnchor+escapedSearchText,"i"),zregex=new RegExp(escapedSearchText,"i"),_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.search_match=!1,results_group=null,this.include_option_in_results(option)&&(option.group&&(option.group_match=!1,option.active_options=0),null!=option.group_array_index&&this.results_data[option.group_array_index]&&(results_group=this.results_data[option.group_array_index],0===results_group.active_options&&results_group.search_match&&(results+=1),results_group.active_options+=1),(!option.group||this.group_search)&&(option.search_text=option.group?option.label:option.html,option.search_match=this.search_string_match(option.search_text,regex),option.search_match&&!option.group&&(results+=1),option.search_match?(searchText.length&&(startpos=option.search_text.search(zregex),text=option.search_text.substr(0,startpos+searchText.length)+"</em>"+option.search_text.substr(startpos+searchText.length),option.search_text=text.substr(0,startpos)+"<em>"+text.substr(startpos)),null!=results_group&&(results_group.group_match=!0)):null!=option.group_array_index&&this.results_data[option.group_array_index].search_match&&(option.search_match=!0)));return this.result_clear_highlight(),1>results&&searchText.length?(this.update_results_content(""),this.no_results(searchText)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string))return!0;if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||0===search_string.indexOf("["))&&(parts=search_string.replace(/\[|\]/g,"").split(" "),parts.length))for(_i=0,_len=parts.length;_len>_i;_i++)if(part=parts[_i],regex.test(part))return!0},AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,_ref=this.form_field.options,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(evt){return evt.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(evt.preventDefault(),this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(option){return this.is_multiple&&!this.display_selected_options&&option.selected?!1:!this.display_disabled_options&&option.disabled?!1:option.empty?!1:!0},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),$=jQuery,$.fn.extend({chosen:function(options){return AbstractChosen.browser_is_supported()?this.each(function(){var $this,chosen;$this=$(this),chosen=$this.data("chosen"),"destroy"===options&&chosen?chosen.destroy():chosen||$this.data("chosen",new Chosen(this,options))}):this}}),Chosen=function(_super){function Chosen(){return _ref=Chosen.__super__.constructor.apply(this,arguments)}return __extends(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var container_classes,container_props;return container_classes=["chosen-container"],container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&container_classes.push(this.form_field.className),this.is_rtl&&container_classes.push("chosen-rtl"),container_props={"class":container_classes.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=$("<div />",container_props),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.bind("mousedown.chosen",function(evt){_this.container_mousedown(evt)}),this.container.bind("mouseup.chosen",function(evt){_this.container_mouseup(evt)}),this.container.bind("mouseenter.chosen",function(evt){_this.mouse_enter(evt)}),this.container.bind("mouseleave.chosen",function(evt){_this.mouse_leave(evt)}),this.search_results.bind("mouseup.chosen",function(evt){_this.search_results_mouseup(evt)}),this.search_results.bind("mouseover.chosen",function(evt){_this.search_results_mouseover(evt)}),this.search_results.bind("mouseout.chosen",function(evt){_this.search_results_mouseout(evt)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(evt){_this.search_results_mousewheel(evt)}),this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt)}),this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt)}),this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt)}),this.search_field.bind("blur.chosen",function(evt){_this.input_blur(evt)}),this.search_field.bind("keyup.chosen",function(evt){_this.keyup_checker(evt)}),this.search_field.bind("keydown.chosen",function(evt){_this.keydown_checker(evt)}),this.search_field.bind("focus.chosen",function(evt){_this.input_focus(evt)
}),this.is_multiple?this.search_choices.bind("click.chosen",function(evt){_this.choices_click(evt)}):this.container.bind("click.chosen",function(evt){evt.preventDefault()})},Chosen.prototype.destroy=function(){return $(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(evt){return this.is_disabled||(evt&&"mousedown"===evt.type&&!this.results_showing&&evt.preventDefault(),null!=evt&&$(evt.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("a.chosen-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(evt){return"ABBR"!==evt.target.nodeName||this.is_disabled?void 0:this.results_reset(evt)},Chosen.prototype.search_results_mousewheel=function(evt){var delta,_ref1,_ref2;return delta=-(null!=(_ref1=evt.originalEvent)?_ref1.wheelDelta:void 0)||(null!=(_ref2=evt.originialEvent)?_ref2.detail:void 0),null!=delta?(evt.preventDefault(),"DOMMouseScroll"===evt.type&&(delta=40*delta),this.search_results.scrollTop(delta+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return $(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){return this.container.is($(evt.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){if(this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),maxHeight=parseInt(this.search_results.css("maxHeight"),10),visible_top=this.search_results.scrollTop(),visible_bottom=maxHeight+visible_top,high_top=this.result_highlight.position().top+this.search_results.scrollTop(),high_bottom=high_top+this.result_highlight.outerHeight(),high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(visible_top>high_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(){var ti;return this.form_field.tabIndex?(ti=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=ti):void 0},Chosen.prototype.set_label_behavior=function(){var _this=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=$("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(evt){return _this.is_multiple?_this.container_mousedown(evt):_this.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target.length?(this.result_highlight=target,this.result_select(evt),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target?this.result_do_highlight(target):void 0},Chosen.prototype.search_results_mouseout=function(evt){return $(evt.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;return choice=$("<li />",{"class":"search-choice"}).html("<span>"+item.html+"</span>"),item.disabled?choice.addClass("search-choice-disabled"):(close_link=$("<a />",{"class":"search-choice-close","data-option-array-index":item.array_index}),close_link.bind("click.chosen",function(evt){return _this.choice_destroy_link_click(evt)}),choice.append(close_link)),this.search_container.before(choice)},Chosen.prototype.choice_destroy_link_click=function(evt){return evt.preventDefault(),evt.stopPropagation(),this.is_disabled?void 0:this.choice_destroy($(evt.target))},Chosen.prototype.choice_destroy=function(link){return this.result_deselect(link[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),link.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,item,selected_index;return this.result_highlight?(high=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?high.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),selected_index=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[selected_index].selected=!1),this.result_single_selected=high),high.addClass("result-selected"),item=this.results_data[high[0].getAttribute("data-option-array-index")],item.selected=!0,this.form_field.options[item.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(item):this.single_set_selected_text(item.text),(evt.metaKey||evt.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(text){return null==text&&(text=this.default_text),text===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(text)},Chosen.prototype.result_deselect=function(pos){var result_data;return result_data=this.results_data[pos],this.form_field.options[result_data.options_index].disabled?!1:(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;return selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first(),null!=do_high?this.result_do_highlight(do_high):void 0},Chosen.prototype.no_results=function(terms){var no_results_html;return no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),no_results_html.find("span").first().html(terms),this.search_results.append(no_results_html)},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var next_sib;return this.results_showing&&this.result_highlight?(next_sib=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(next_sib):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result"),prev_sibs.length?this.result_do_highlight(prev_sibs.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(next_available_destroy=this.search_container.siblings("li.search-choice").last(),next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")?(this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;switch(stroke=null!=(_ref1=evt.which)?_ref1:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:evt.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){for(h=0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],_i=0,_len=styles.length;_len>_i;_i++)style=styles[_i],style_block+=style+":"+this.search_field.css(style)+";";return div=$("<div />",{style:style_block}),div.text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),f_width=this.container.outerWidth(),w>f_width-10&&(w=f_width-10),this.search_field.css({width:w+"px"})}},Chosen}(AbstractChosen)}.call(this),jQuery(function($){var Meta={},Alerts={};Meta.changeChosen=function(e){var chosenElem=$("#"+e.currentTarget.id).val(),select_id=e.currentTarget.id.replace("_multi_chosen",""),textField=$("#"+select_id);textField.val(chosenElem)},Meta.setupChosen=function(){var chosenElem=$(".mdg-chosen-select");return 0===chosenElem?!1:(chosenElem.chosen({allow_single_deselect:!0,disable_search_threshold:5}),void chosenElem.chosen().change(function(e){Meta.changeChosen(e)}))},Meta.setupDatepicker=function(){var datePicker=$(".mdg-datepicker");if(0===datePicker.length)return!1;var dateFormat=datePicker.data("format");console.log(dateFormat),dateFormat="undefined"==typeof dateFormat||""===dateFormat?"MM d, yy":dateFormat,datePicker.datepicker({dateFormat:dateFormat,changeMonth:!0,changeYear:!0,yearRange:"2000:2020"})},Meta.setupColorPicker=function(){var colorPicker=$(".mdg-color-picker");if(0===colorPicker.length)return!1;var options={defaultColor:!1,change:function(){},clear:function(){},hide:!0,palettes:!0};colorPicker.wpColorPicker(options)},Meta.initAfterTitlePlaceholder=function(){var elems=$(".after-title-placeholder");if(0!==elems.length){var inputs=elems.find("input");inputs.on("focus",function(){$(this).parent(".after-title-placeholder").removeClass("empty")}),inputs.on("blur",function(){var that=$(this);""===that.val()&&$(this).parent(".after-title-placeholder").addClass("empty")}),inputs.on("change",function(){var that=$(this);""===that.val()&&$(this).parent(".after-title-placeholder").addClass("empty")})}},Meta.init=function(){Meta.setupChosen(),Meta.setupDatepicker(),Meta.setupColorPicker(),Meta.initAfterTitlePlaceholder()},Alerts.getImageReferenceGrid=function(){if("upload"!==pagenow)return!1;$("h2").after('<div class="updated"><p><a href="#" id="image-size-reference-trigger">View image size reference.</a></p></div><div class="image-size-reference"></div>');var trigger=$("#image-size-reference-trigger");return trigger.click(function(){$.get(ajaxurl,{action:"mdg-image-reference-grid"},function(returnHtml){trigger.after('<p class="mdg-image-reference"><a href="#" id="hide-image-grid-reference">hide image sizes</a></p><p class="mdg-image-reference">please note that image sizes may be smaller to fit into your screen</p>'),returnHtml='<div class="mdg-image-reference">'+returnHtml+'<div style="clear:both"></div></div>',$(".image-size-reference").empty().append(returnHtml),trigger.hide(),$("#hide-image-grid-reference").click(function(){$(".mdg-image-reference").remove(),trigger.show()})})}),!1},Alerts.init=function(){Alerts.getImageReferenceGrid()},$(document).ready(function(){Meta.init(),Alerts.init()})}(jQuery)),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}(),jQuery(function($){$(window).load(function(){var file_frame;$(".mdg-meta-upload").each(function(index,el){var wrap=$(el),srcField=wrap.find('input[type="text"]'),idField=wrap.find('input[type="hidden"]'),uploadthumb=wrap.find(".meta-upload-thumb");srcField.off("change").on("change",function(){var val=$(this).val();("undefined"!=typeof val||""!==val)&&(uploadthumb.remove(),idField.val(""))})}),$(".mdg-meta-upload .upload-link").on("click",function(e){var metaWrap=$(e.currentTarget).parent(".mdg-meta-upload"),metaTextField=metaWrap.find('input[type="text"]'),metaSaveField=metaWrap.find('input[type="hidden"]');metaTextField.change(function(){}),e.preventDefault(),file_frame=wp.media.frames.file_frame=wp.media({title:"Upload a file",button:{text:"Upload File"},multiple:!1}),file_frame.on("select",function(){var fileFrameJSON=file_frame.state().get("selection").toJSON(),fileUrl=fileFrameJSON[0].url;fileId=fileFrameJSON[0].id,metaTextField.val(fileUrl),metaSaveField.val(fileId);var ajaxParams={action:"mdg_meta_upload_thumb",fileSrc:fileUrl};$.getJSON(ajaxurl,ajaxParams,function(json){var thumbElem=metaWrap.find(".meta-upload-thumb");thumbElem.prev("br").remove(),thumbElem.remove(),metaWrap.append(json)})}),file_frame.open()})})}(jQuery));
//# sourceMappingURL=admin.min.js.map